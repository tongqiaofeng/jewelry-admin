{"remainingRequest":"G:\\aa-tong\\my-project\\jewelry-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\aa-tong\\my-project\\jewelry-admin\\src\\components\\Sales-report.vue?vue&type=style&index=0&id=5e22e3c1&lang=scss&scoped=true&","dependencies":[{"path":"G:\\aa-tong\\my-project\\jewelry-admin\\src\\components\\Sales-report.vue","mtime":1637043344736},{"path":"G:\\aa-tong\\my-project\\jewelry-admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\aa-tong\\my-project\\jewelry-admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"G:\\aa-tong\\my-project\\jewelry-admin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"G:\\aa-tong\\my-project\\jewelry-admin\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\aa-tong\\my-project\\jewelry-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\aa-tong\\my-project\\jewelry-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQoudXBsb2FkLWltZ3Mgew0KICBkaXNwbGF5OiBmbGV4Ow0KfQ0KLmRlbEltZyB7DQogIG1hcmdpbi1sZWZ0OiAxMHB4Ow0KfQ0KLnN0b2NrLXBlbmRpbmctY29udGFpbmVyIHsNCiAgcGFkZGluZzogMjBweDsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsNCiAgYm9yZGVyLXJhZGl1czogNnB4Ow0KICB0ZXh0LWFsaWduOiBsZWZ0Ow0KfQ0KLmZvbnQtdGl0bGUtc3R5bGUgew0KICBtYXJnaW4tdG9wOiAyMHB4Ow0KICBtYXJnaW4tYm90dG9tOiAxMHB4Ow0KICBjb2xvcjogIzZhNmE2YTsNCiAgZm9udC1zaXplOiAxOHB4Ow0KICBmb250LXdlaWdodDogYm9sZDsNCiAgdGV4dC1hbGlnbjogbGVmdDsNCn0NCg0KLmZvbnQtZGl2IHsNCiAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsNCiAgYm9yZGVyLWJvdHRvbTogbm9uZTsNCg0KICAuZGl2LW9uZSB7DQogICAgaGVpZ2h0OiAzNHB4Ow0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgbGluZS1oZWlnaHQ6IDM0cHg7DQogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNjY2M7DQoNCiAgICAub25lLWxlZnQgew0KICAgICAgd2lkdGg6IDk0cHg7DQogICAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjY2NjOw0KICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YyZjJmMjsNCiAgICB9DQoNCiAgICAub25lLXJpZ2h0IHsNCiAgICAgIHdpZHRoOiAzNzNweDsNCiAgICAgIHBhZGRpbmctbGVmdDogMTBweDsNCiAgICB9DQogIH0NCg0KICAuZGl2LW9uZS1ub3RlIHsNCiAgICBoZWlnaHQ6IDEwMHB4Ow0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgbGluZS1oZWlnaHQ6IDEwMHB4Ow0KICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjY2NjOw0KDQogICAgLm9uZS1sZWZ0IHsNCiAgICAgIHdpZHRoOiA5NHB4Ow0KICAgICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgI2NjYzsNCiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmMmYyZjI7DQogICAgfQ0KDQogICAgLm9uZS1yaWdodCB7DQogICAgICB3aWR0aDogMzczcHg7DQogICAgICBwYWRkaW5nLWxlZnQ6IDEwcHg7DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["Sales-report.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Sales-report.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"stock-pending-container\">\r\n    <!-- <h1>销售报表</h1> -->\r\n    <div style=\"display:flex;justify-content: space-between;\">\r\n      <el-form :inline=\"true\" label-width=\"95px\">\r\n        <el-form-item label=\"产品类别：\">\r\n          <el-select\r\n            v-model=\"productType\"\r\n            placeholder=\"请选择\"\r\n            @change=\"keywordChange\"\r\n            :popper-append-to-body=\"false\"\r\n          >\r\n            <el-option\r\n              v-for=\"item in productTypeList\"\r\n              :key=\"item.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.id\"\r\n            >\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"销售员：\">\r\n          <el-select\r\n            v-model=\"solder\"\r\n            placeholder=\"请选择\"\r\n            @change=\"keywordChange\"\r\n            :popper-append-to-body=\"false\"\r\n          >\r\n            <el-option\r\n              v-for=\"item in solderList\"\r\n              :key=\"item\"\r\n              :label=\"item\"\r\n              :value=\"item\"\r\n            >\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"销售时间：\">\r\n          <el-date-picker\r\n            v-model=\"time\"\r\n            type=\"monthrange\"\r\n            range-separator=\"至\"\r\n            start-placeholder=\"开始月份\"\r\n            end-placeholder=\"结束月份\"\r\n            format=\"yyyy-MM\"\r\n            value-format=\"yyyy-MM\"\r\n            @change=\"keywordChange\"\r\n            clearable\r\n          >\r\n          </el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button\r\n            style=\"margin-left: 10px;\"\r\n            type=\"primary\"\r\n            @click=\"getSalesList\"\r\n            >查 询</el-button\r\n          >\r\n        </el-form-item>\r\n      </el-form>\r\n      <div>\r\n        <el-button type=\"primary\" @click=\"reportData\">导出数据</el-button>\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <el-table\r\n        style=\"width: 100%;\"\r\n        ref=\"multipleTable\"\r\n        :data=\"salesList\"\r\n        tooltip-effect=\"dark\"\r\n        border\r\n      >\r\n        <el-table-column prop=\"productNumber\" label=\"统一编号\">\r\n        </el-table-column>\r\n        <el-table-column label=\"图片\" width=\"120px\">\r\n          <template slot-scope=\"scope\">\r\n            <div>\r\n              <img\r\n                v-if=\"scope.row.img != ''\"\r\n                :src=\"axiosUrl + '/file/' + scope.row.img\"\r\n                style=\"width: 100px;height: 100px;object-fit: cover;\"\r\n              />\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"productName\" label=\"产品名称\"> </el-table-column>\r\n        <el-table-column prop=\"type\" label=\"产品类别\"> </el-table-column>\r\n        <el-table-column prop=\"params\" label=\"参数\"></el-table-column>\r\n        <el-table-column prop=\"stockInTime\" label=\"入库时间\"> </el-table-column>\r\n        <el-table-column prop=\"stockOutTime\" label=\"销售时间\">\r\n        </el-table-column>\r\n        <el-table-column label=\"成本\">\r\n          <template slot-scope=\"scope\">\r\n            <div>\r\n              {{ formatNumberRgx(scope.row.cost) + \" \" + scope.row.currency }}\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"最低售价\">\r\n          <template slot-scope=\"scope\">\r\n            <div>\r\n              {{\r\n                formatNumberRgx(scope.row.lowestSellPrice) +\r\n                  \" \" +\r\n                  scope.row.currency\r\n              }}\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"批发价\">\r\n          <template slot-scope=\"scope\">\r\n            <div>\r\n              {{\r\n                formatNumberRgx(scope.row.adviceWholesalePrice) +\r\n                  \" \" +\r\n                  scope.row.currency\r\n              }}\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"零售价\">\r\n          <template slot-scope=\"scope\">\r\n            <div>\r\n              {{\r\n                formatNumberRgx(scope.row.adviseSellPrice) +\r\n                  \" \" +\r\n                  scope.row.currency\r\n              }}\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"出库价\">\r\n          <template slot-scope=\"scope\">\r\n            <div>\r\n              {{\r\n                formatNumberRgx(scope.row.saleMoney) +\r\n                  \" \" +\r\n                  scope.row.saleCurrency\r\n              }}\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"利润\">\r\n          <template slot-scope=\"scope\">\r\n            <div>\r\n              {{\r\n                formatNumberRgx(scope.row.profit) + \" \" + scope.row.saleCurrency\r\n              }}\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"customer\" label=\"买家\"> </el-table-column>\r\n        <el-table-column prop=\"solder\" label=\"销售员\"> </el-table-column>\r\n        <el-table-column prop=\"warehouse\" label=\"售出仓库/加工厂\">\r\n        </el-table-column>\r\n      </el-table>\r\n      <div style=\"width: 100%;height: 50px;\">\r\n        <div style=\"margin:15px 0;position:absolute;right:6%;\">\r\n          <el-pagination\r\n            @current-change=\"handleCurrentChange\"\r\n            :current-page=\"page\"\r\n            layout=\"total, prev, pager, next, jumper\"\r\n            :total=\"total\"\r\n          >\r\n          </el-pagination>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      axiosUrl: this.$store.state.baseUrl,\r\n      productType: 0,\r\n      productTypeList: [\r\n        {\r\n          id: 0,\r\n          name: \"全部\",\r\n        },\r\n        {\r\n          id: 1,\r\n          name: \"原材料\",\r\n        },\r\n        {\r\n          id: 2,\r\n          name: \"成品\",\r\n        },\r\n      ],\r\n      solder: \"全部\",\r\n      solderList: \"\",\r\n      salesList: [],\r\n      time: null,\r\n      total: 0,\r\n      page: 1,\r\n    };\r\n  },\r\n  created() {\r\n    this.getSolderList();\r\n  },\r\n  methods: {\r\n    // 导出数据\r\n    reportData() {\r\n      this.$axios\r\n        .post(this.$store.state.baseUrl + \"/salesReportExport\", {\r\n          type: this.productType,\r\n          solder: this.solder,\r\n          startTime: this.time == null ? \"\" : this.time[0],\r\n          endTime: this.time == null ? \"\" : this.time[1],\r\n          page: 1,\r\n        })\r\n        .then((res) => {\r\n          console.log(\"导出销售报表\");\r\n          console.log(res);\r\n          location.href = this.axiosUrl + res.data.url;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    // 获取销售报表列表\r\n    getSalesList() {\r\n      this.salesList = [];\r\n      this.$axios\r\n        .post(this.$store.state.baseUrl + \"/salesReport\", {\r\n          type: this.productType,\r\n          solder: this.solder,\r\n          startTime: this.time == null ? \"\" : this.time[0],\r\n          endTime: this.time == null ? \"\" : this.time[1],\r\n          page: this.page,\r\n          pageNum: 10,\r\n        })\r\n        .then((res) => {\r\n          console.log(\"销售报表列表\");\r\n          console.log(res);\r\n          this.total = res.data.total;\r\n          this.salesList = res.data.list;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    // 获取销售员列表\r\n    getSolderList() {\r\n      this.$axios\r\n        .get(this.$store.state.baseUrl + \"/solderList\")\r\n        .then((res) => {\r\n          console.log(\"销售员列表\");\r\n          console.log(res);\r\n          this.solderList = res.data;\r\n          this.getSalesList();\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    keywordChange() {\r\n      this.page = 1;\r\n    },\r\n    // 分页\r\n    handleCurrentChange(val) {\r\n      console.log(`当前页: ${val}`);\r\n      this.page = val;\r\n      this.getSalesList();\r\n      (function smoothscroll() {\r\n        let currentScroll =\r\n          document.documentElement.scrollTop || document.body.scrollTop;\r\n        if (currentScroll > 0) {\r\n          window.requestAnimationFrame(smoothscroll);\r\n          window.scrollTo(0, currentScroll - currentScroll / 5);\r\n        }\r\n      })();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.upload-imgs {\r\n  display: flex;\r\n}\r\n.delImg {\r\n  margin-left: 10px;\r\n}\r\n.stock-pending-container {\r\n  padding: 20px;\r\n  background-color: #fff;\r\n  border-radius: 6px;\r\n  text-align: left;\r\n}\r\n.font-title-style {\r\n  margin-top: 20px;\r\n  margin-bottom: 10px;\r\n  color: #6a6a6a;\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  text-align: left;\r\n}\r\n\r\n.font-div {\r\n  border: 1px solid #ccc;\r\n  border-bottom: none;\r\n\r\n  .div-one {\r\n    height: 34px;\r\n    display: flex;\r\n    line-height: 34px;\r\n    border-bottom: 1px solid #ccc;\r\n\r\n    .one-left {\r\n      width: 94px;\r\n      border-right: 1px solid #ccc;\r\n      text-align: center;\r\n      background-color: #f2f2f2;\r\n    }\r\n\r\n    .one-right {\r\n      width: 373px;\r\n      padding-left: 10px;\r\n    }\r\n  }\r\n\r\n  .div-one-note {\r\n    height: 100px;\r\n    display: flex;\r\n    line-height: 100px;\r\n    border-bottom: 1px solid #ccc;\r\n\r\n    .one-left {\r\n      width: 94px;\r\n      border-right: 1px solid #ccc;\r\n      text-align: center;\r\n      background-color: #f2f2f2;\r\n    }\r\n\r\n    .one-right {\r\n      width: 373px;\r\n      padding-left: 10px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n<style lang=\"scss\">\r\n.el-table--enable-row-transition .el-table__body td {\r\n  text-align: center;\r\n}\r\n.el-table td,\r\n.el-table th.is-leaf {\r\n  text-align: center;\r\n}\r\n.stock-pending-container {\r\n  .el-dialog__body {\r\n    height: 600px;\r\n    overflow: auto;\r\n    padding: 0 20px;\r\n  }\r\n\r\n  .el-textarea__inner {\r\n    height: 100px;\r\n    display: block;\r\n    resize: vertical;\r\n    padding: 5px 15px;\r\n    line-height: 1.5;\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n    font-size: inherit;\r\n    color: #606266;\r\n    background-color: #fff;\r\n    background-image: none;\r\n    border: none;\r\n    border-radius: 0;\r\n    transition: border-color 0.2s cubic-bezier(0.645, 0.045, 0.355, 1);\r\n  }\r\n}\r\n\r\n.el-dialog__header {\r\n  text-align: left;\r\n}\r\n</style>\r\n"]}]}